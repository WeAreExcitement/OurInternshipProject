<Window x:Class="UDPTestUIWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:UDPTestUIWPF"
        Title="UDP test" Height="450" Width="600">

    <Window.Resources>
        <local:UDPDataModel x:Key="UdpModel"
                            x:Name="udpModel"
                            Port="{Binding ElementName=PortTextBox, Path=Text}"
                            Octet1="{Binding ElementName=Octet1TextBox, Path=Text}"
                            Octet2="{Binding ElementName=Octet2TextBox, Path=Text}"
                            Octet3="{Binding ElementName=Octet3TextBox, Path=Text}"
                            Octet4="{Binding ElementName=Octet4TextBox, Path=Text}"
                            Message="{Binding ElementName=MessageTextBox, Path=Text}">            
        </local:UDPDataModel>
        <local:ConvertStrInt x:Key="ConvertStrUShort"></local:ConvertStrInt>
        <local:ConvertStrByte x:Key="ConvertStrByte"></local:ConvertStrByte>
    </Window.Resources>

    <Grid Margin="0,0,2,4" DataContext="{StaticResource UdpModel}">       

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="58*" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <TextBox Name="PortTextBox"
                 HorizontalAlignment="Left"
                 Margin="10,159,0,0"
                 Text="{Binding Port,
                        Converter={StaticResource ConvertStrUShort},
                        UpdateSourceTrigger=LostFocus,
                        Mode=TwoWay}"
                 VerticalAlignment="Top"
                 Width="100"
                 Height="40"
                 FontSize="16"
                 HorizontalContentAlignment="Center"
                 VerticalContentAlignment="Center" />

        <TextBox Name="MessageTextBox"
                 HorizontalAlignment="Left"
                 Width="311"
                 Height="296"
                 Margin="245,63,0,0"
                 TextWrapping="Wrap"
                 Text="{Binding Message, Mode=TwoWay}"
                 VerticalAlignment="Top"
                 FontSize="16"
                 VerticalScrollBarVisibility="Auto" />

        <Label Name="IPAdressLabel"
               Content="IP Adress:"
               HorizontalAlignment="Left"
               Margin="10,25,0,0"
               VerticalAlignment="Top"
               FontSize="16"
               FontWeight="Bold"
               IsEnabled="{Binding IsChecked, ElementName=SendRadioButton}"
               Height="30"
               Width="80"/>

        <Label Content="Port:"
               HorizontalAlignment="Left"
               Margin="10,123,0,0"
               VerticalAlignment="Top"
               FontSize="16"
               FontWeight="Bold"
               Height="30"
               Width="80" />

        <Label Content="Message:"
               HorizontalAlignment="Left"
               Margin="245,25,0,0"
               VerticalAlignment="Top"
               FontSize="16"
               FontWeight="Bold"
               Height="30"
               Width="80" />

        <Button Name="StartButton"
                Content="Start"
                HorizontalAlignment="Left"
                Margin="10,319,0,0"
                VerticalAlignment="Top"
                Width="210"
                Height="40"
                FontSize="16"
                FontWeight="Bold"
                Click="StartButton_Click"
                IsDefault="True" />

        <StackPanel HorizontalAlignment="Left"
                    Height="30"
                    Margin="10,241,0,0"
                    VerticalAlignment="Top"
                    Width="100">

            <RadioButton Name="SendRadioButton"
                         Content="Send"
                         IsChecked="True" />

            <RadioButton Name="ReceiveRadioButton"
                         Content="Receive" />

        </StackPanel>

        <Label Name="StatusLabel"
               Content="Статус соединения"
               HorizontalAlignment="Left"
               Margin="10,370,0,0"
               VerticalAlignment="Top"
               Width="292" Height="26"/>

        <CheckBox x:Name="CycleCheckBox"
                  Content="Cycle"
                  HorizontalAlignment="Left"
                  Margin="10,221,0,0"
                  VerticalAlignment="Top"/>
        
        <StackPanel Orientation="Horizontal"
                    HorizontalAlignment="Left"
                    Height="40"
                    Margin="10,63,0,0"
                    VerticalAlignment="Top"
                    Width="210"
                    IsEnabled="{Binding IsChecked, ElementName=SendRadioButton}">

            <TextBox Name="Octet1TextBox"
                     Text="{Binding Octet1,
                        Converter={StaticResource ConvertStrByte},
                        UpdateSourceTrigger=LostFocus,
                        Mode=TwoWay}"
                     Margin="0"
                     MinWidth="40"
                     VerticalContentAlignment="Center"
                     HorizontalContentAlignment="Center"
                     FontSize="16" Width="40"/>

            <Label Content="."
                   Margin="0"
                   VerticalContentAlignment="Center"
                   FontWeight="Bold"
                   FontSize="16"/>

            <TextBox Name="Octet2TextBox"
                     Text="{Binding Octet2,
                        Converter={StaticResource ConvertStrByte},
                        UpdateSourceTrigger=LostFocus,
                        Mode=TwoWay}"
                     Margin="0"
                     MinWidth="40"
                     VerticalContentAlignment="Center"
                     HorizontalContentAlignment="Center"
                     FontSize="16" Width="40"/>

            <Label Content="."
                   Margin="0"
                   VerticalContentAlignment="Center"
                   FontWeight="Bold"
                   FontSize="16"/>

            <TextBox Name="Octet3TextBox"
                     Text="{Binding Octet3,
                        Converter={StaticResource ConvertStrByte},
                        UpdateSourceTrigger=LostFocus,
                        Mode=TwoWay}"
                     Margin="0"
                     MinWidth="40"
                     VerticalContentAlignment="Center"
                     HorizontalContentAlignment="Center"
                     FontSize="16"
                     AcceptsReturn="True" Width="40"/>

            <Label Content="."
                   Margin="0"
                   VerticalContentAlignment="Center"
                   FontWeight="Bold"
                   FontSize="16"/>

            <TextBox Name="Octet4TextBox"
                     Text="{Binding Octet4,
                        Converter={StaticResource ConvertStrByte},
                        UpdateSourceTrigger=LostFocus,
                        Mode=TwoWay}"
                     Margin="0"
                     MinWidth="40"
                     VerticalContentAlignment="Center"
                     HorizontalContentAlignment="Center"
                     FontSize="16" Width="40"/>
        </StackPanel>
        
        <CheckBox x:Name="WriteDBCheckBox"
                  Content="Write to DB"
                  HorizontalAlignment="Left"
                  Margin="10,285,0,0"
                  VerticalAlignment="Top"
                  IsEnabled="{Binding IsChecked, ElementName=ReceiveRadioButton}"/>

    </Grid>
</Window>